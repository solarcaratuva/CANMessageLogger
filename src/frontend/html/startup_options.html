<head>
    <meta charset="utf-8"/>
    <title>Startup Options</title>
    <link rel="stylesheet" href="/static/style/startup_options.css">
    <script src="/static/js/startup_options.js"></script>
</head>
<body>
    <h1>Configure & Launch</h1>
    <form method="POST" action="/start">
    <fieldset>
        <legend>Log Type</legend>
        <div class="radio-group">
            <div class="radio-option">
                <input type="radio" name="logType" id="pastlog" value="pastlog" onchange="updateInputFileState()" required>
                <label for="pastlog">pastlog</label>
            </div>
            <div class="radio-option">
                <input type="radio" name="logType" id="livelog" value="livelog" onchange="updateInputFileState()">
                <label for="livelog">livelog</label>
            </div>
            <div class="radio-option">
                <input type="radio" name="logType" id="mock_livelog" value="mock_livelog" onchange="updateInputFileState()">
                <label for="mock_livelog">mock_livelog</label>
            </div>
            <div class="radio-option">
                <input type="radio" name="logType" id="db" value="db" onchange="updateInputFileState()">
                <label for="db">db</label>
            </div>
            <div class="radio-option">
                <input type="radio" name="logType" id="radio" value="radio" onchange="updateInputFileState()">
                <label for="radio">radio</label>
            </div>
        </div>
        <small>Choose the data source.</small>
    </fieldset>

    <fieldset id="inputFileFieldset" style="display:none;">
        <label for="inputFile">Input File <span id="inputFileRequiredLabel" style="color:#c00;">(required)</span></label>
        <div class="input-with-button">
            <input type="text" id="inputFile" name="inputFile" placeholder="e.g. /path/to/file.log" />
            <button type="button" id="browseButton" onclick="browseForFile()">Browseâ€¦</button>
        </div>
        <div id="inputFileError" class="error">Input file must be a .log, .txt, or .db file</div>
        <small>Required for pastlog/mock_livelog (.log/.txt) and db (.db).</small>
    </fieldset>

    <fieldset>
        <label for="outputDB">Output DB (optional)</label>
        <input type="text" id="outputDB" name="outputDB" placeholder="./CANDatabases/can_database_X.db" />
        <div id="outputDBError" class="error">Output DB must end with .db</div>
        <small>If omitted, a timestamped DB will be created.</small>
    </fieldset>

    <fieldset>
        <legend>DBC Branch</legend>
        <div class="radio-group">
            <div class="radio-option">
                <input type="radio" name="set_dbc_branch" id="main" value="main" checked>
                <label for="main">main</label>
            </div>
            <div class="radio-option">
                <input type="radio" name="set_dbc_branch" id="dev" value="dev">
                <label for="dev">dev</label>
            </div>
            <div class="radio-option">
                <input type="radio" name="set_dbc_branch" id="testing" value="testing">
                <label for="testing">testing</label>
            </div>
        </div>
    </fieldset>

    <fieldset id="hardwareStatusFieldset" style="display: none;">
        <legend>Hardware Status</legend>
        <div id="hardwareStatus" style="padding: 0.5rem; border-radius: 4px; font-weight: 600;">
            Checking hardware...
        </div>
    </fieldset>

    <button type="button" id="launchButton" onclick="handleFormSubmit()">Launch App</button>
    </form>


</body>
